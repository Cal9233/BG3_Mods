game.states.GLO_UndeadHusband = State{ function()
    
    description = [[Dread Overlord's version of Connor Vinderblad's camp wandering and violin playing animation.]]

    modules = {"shared.util"}

    local inCampFlag = Flag("CAMP_GLO_State_InCamp_161b7223-039d-4ebe-986f-1dcd9a66733f")
    local moveToEntity = nil

    --------------------NODES---------------------

    nodes.Follower = Proxy{
        Valid = function()
            return moveToEntity == nil
        end,
        game.states.DefaultPartyMember
    }

    nodes.InCamp = Action{
        function()
            if ((not HasActiveStatus(me, "PERFORM_POSITIVE_THEPOWER") and not HasActiveStatus(me, "PERFORM_POSITIVE_BARDDANCE")) or math.random() < 0.3) then
                if math.random() < 0.5 then
                    Wander(5.0,math.random(5,10), MovementSpeed.Walk)
                    Sleep(5.0)
                else
                    if math.random() < 0.5 then
                        if HasActiveStatus(me, "PERFORM_POSITIVE_BARDDANCE") then
                            RemoveStatus(me, "PERFORM_POSITIVE_BARDDANCE")
                            Sleep(5.0)
                        end
                        ApplyStatus(me, "PERFORM_POSITIVE_THEPOWER", false, 180)
                        Sleep(math.random(60, 180))
                    else
                        if HasActiveStatus(me, "PERFORM_POSITIVE_THEPOWER") then
                            RemoveStatus(me, "PERFORM_POSITIVE_THEPOWER")
                            Sleep(5.0)
                        end
                        ApplyStatus(me, "PERFORM_POSITIVE_BARDDANCE", false, 90)
                        Sleep(math.random(30, 90))
                    end
                end
                mod.util.SleepRandom(15.0, 25.0)
                return
            else
                mod.util.SleepRandom(0.5, 2.0)
            end
        end,
        Valid = function() 
            return moveToEntity == nil
            and GetFlag(inCampFlag, me)
        end
    }

    --------------------EVENTS---------------------

    events.SavegameLoaded = function(e)
        if inCampFlag == nil then
            inCampFlag = Flag("CAMP_GLO_State_InCamp_161b7223-039d-4ebe-986f-1dcd9a66733f")
        end
    end

    events.FlagCleared = function(e)
        if e.Flag == Guid("CAMP_GLO_State_InCamp_161b7223-039d-4ebe-986f-1dcd9a66733f") then
            Interrupt()
        end
    end
end}